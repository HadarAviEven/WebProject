import React, { Component } from 'react';
import JewelrySingle from './jewelry_single';

class JewelryRings extends Component {
    state = { rings_ar: [], ringsSearch_ar: [] };

    componentDidMount() {
        let myUrl = "https://raw.githubusercontent.com/HadarAviEven/web_project/master/JewelryFinal.json"
        var type_ar = [];
        fetch(myUrl)
            .then(resp => resp.json())
            .then(data => {
                type_ar = data.filter(item => {
                    return (item.type === "Rings");
                })
                this.setState({ rings_ar: type_ar, ringsSearch_ar: type_ar });
            })
    }

    onChangeSearch = () => {
        let searchQ = this.refs.id_search.value;
        let temp_ar = this.state.rings_ar.filter(item => {
            return (item.title.toLowerCase().indexOf(searchQ.toLowerCase()) >= 0);
        })
        this.setState({ ringsSearch_ar: temp_ar });
    }

    render() {
        return (
            <div className="container-fluid bg-secondary">
                <div className="container">
                    <div className="py-3">
                        <label className="text-warning px-2 font-weight-bold">Search:</label>
                        <input ref={"id_search"} type="text" onInput={this.onChangeSearch} />
                    </div>
                    {(this.state.ringsSearch_ar.length > 0) ? "" : <img src="images/loading.gif" />}
                    <div className="row">
                        {this.state.ringsSearch_ar.map(item => {
                            return (
                                <JewelrySingle item={item} key={item.id} />
                            )
                        })}
                    </div>
                </div>
            </div>
        );
    }
}
export default JewelryRings;