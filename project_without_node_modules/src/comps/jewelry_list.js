import React, { Component } from 'react';
import JewelrySingle from './jewelry_single';

class JewelryList extends Component {
    state = { jewelry_ar: [], jewelrySearch_ar: [] };

    componentDidMount() {
        let myUrl = "https://raw.githubusercontent.com/HadarAviEven/web_project/master/JewelryFinal.json"
        fetch(myUrl)
            .then(resp => resp.json())
            .then(data => {
                this.setState({ jewelry_ar: data, jewelrySearch_ar: data });
            })
    }

    onChangeSearch = () => {
        let searchQ = this.refs.id_search.value;
        let temp_ar = this.state.jewelry_ar.filter(item => {
            return (item.title.toLowerCase().indexOf(searchQ.toLowerCase()) >= 0)
        })
        this.setState({ jewelrySearch_ar: temp_ar })
    }

    render() {
        return (
            <div className="container-fluid bg-secondary">
                <div className="container">
                    <div className="py-3">
                        <label className="text-warning px-2 font-weight-bold">Search:</label>
                        <input ref={"id_search"} type="text" onInput={this.onChangeSearch} />
                    </div>
                    {(this.state.jewelrySearch_ar.length > 0) ? "" : <img src="images/loading.gif" />}
                    <div className="row">
                        {this.state.jewelrySearch_ar.map(item => {
                            return (
                                <JewelrySingle item={item} key={item.id} />
                            )
                        })}
                    </div>
                </div>
            </div>
        );
    }
}
export default JewelryList;